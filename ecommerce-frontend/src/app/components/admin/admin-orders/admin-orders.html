<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-gray-800">Order Management</h1>
  </div>

  <div class="bg-white shadow-md rounded-lg overflow-hidden">
    <div class="overflow-x-auto">
      <table class="min-w-full leading-normal">
        <thead>
          <tr class="text-xs font-semibold tracking-wide text-left text-gray-500 uppercase border-b bg-gray-50">
            <th class="px-5 py-3">Order ID</th>
            <th class="px-5 py-3">User ID</th>
            <th class="px-5 py-3">Order Date</th>
            <th class="px-5 py-3">Total Amount</th>
            <th class="px-5 py-3 text-center">Status</th>
            <th class="px-5 py-3 text-right">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of orders()" class="text-gray-700">
            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
              <p class="text-gray-900 whitespace-no-wrap">{{ order.id }}</p>
            </td>
            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
              <p class="text-gray-900 whitespace-no-wrap">{{ order.userid }}</p>
            </td>
            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
              <p class="text-gray-900 whitespace-no-wrap">{{ order.orderDate | date:'short' }}</p>
            </td>
            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
              <p class="text-gray-900 whitespace-no-wrap">â‚¹{{ order.totalAmount | number:'1.2-2' }}</p>
            </td>
            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm text-center">
              <span class="relative inline-block px-3 py-1 font-semibold leading-tight">
                <span [ngClass]="{
                  'bg-green-200 text-green-900': order.status === orderStatus.DELIVERED,
                  'bg-yellow-200 text-yellow-900': order.status === orderStatus.PROCESSING || order.status === orderStatus.PENDING,
                  'bg-blue-200 text-blue-900': order.status === orderStatus.SHIPPED,
                  'bg-red-200 text-red-900': order.status === orderStatus.CANCELLED
                }" class="absolute inset-0 opacity-50 rounded-full"></span>
                <span class="relative">{{ order.status }}</span>
              </span>
            </td>
            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm text-right space-x-2">
              <a [routerLink]="['/admin/orders', order.id]" class="text-indigo-600 hover:text-indigo-900 transition-colors">View</a>
              <select [(ngModel)]="order.status" (ngModelChange)="setStatus(order, $event)"
                      class="border rounded-lg px-2 py-1 text-sm bg-white focus:outline-none">
                <option value="" disabled>Change Status</option>
                <option *ngFor="let status of orderStatusList" [ngValue]="status">
                  {{ status }}
                </option>
              </select>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="totalPages() > 1" class="flex justify-between items-center px-5 py-3 bg-gray-50 border-t">
      <span class="text-sm text-gray-600">
        Page {{ currentPage() + 1 }} of {{ totalPages() }}
      </span>
      <div class="flex space-x-2">
        <button (click)="load(currentPage() - 1)" [disabled]="currentPage() === 0"
                class="px-3 py-1 text-sm font-semibold rounded-md border transition-colors disabled:opacity-50">
          Previous
        </button>
        <button (click)="load(currentPage() + 1)" [disabled]="isLastPage()"
                class="px-3 py-1 text-sm font-semibold rounded-md border transition-colors disabled:opacity-50">
          Next
        </button>
      </div>
    </div>
  </div>
</div>